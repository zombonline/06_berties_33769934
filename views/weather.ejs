<!doctype html>
<html>
  <head>
    <title>Weather for <%= weatherData.name %></title>
    <link rel="stylesheet" type="text/css" href="/main.css" />
  </head>
  <body>
    <h1>Weather for <%= weatherData.name %> (<%= weatherData.sys.country %>)</h1>

    <form method="GET" action="/weather">
        <label for="city">Search City:</label>
        <input type="text" id="city" name="city" placeholder="Enter a city name" required />
        <input type="submit" value="Get Weather" />
    </form>

    <h2>Current Conditions</h2>
    <p>
      <strong><%= weatherData.weather[0].main %></strong> —
      <%= weatherData.weather[0].description %>
    </p>
    <p>
      <img 
        src="https://openweathermap.org/img/wn/<%= weatherData.weather[0].icon %>@2x.png" 
        alt="<%= weatherData.weather[0].description %>"
      />
    </p>
    <h2>Temperature</h2>
    <ul>
      <li>Current: <%= (weatherData.main.temp).toFixed(1) %>°C</li>
      <li>Feels Like: <%= (weatherData.main.feels_like).toFixed(1) %>°C</li>
      <li>Min: <%= (weatherData.main.temp_min).toFixed(1) %>°C</li>
      <li>Max: <%= (weatherData.main.temp_max).toFixed(1) %>°C</li>
    </ul>
    <h2>Details</h2>
    <ul>
      <li>Humidity: <%= weatherData.main.humidity %>%</li>
      <li>Pressure: <%= weatherData.main.pressure %> hPa</li>
      <li>Wind: <%= weatherData.wind.speed %> m/s at <%= weatherData.wind.deg %>°</li>
      <li>Cloud Cover: <%= weatherData.clouds.all %>%</li>
      <li>Visibility: <%= weatherData.visibility %> m</li>
    </ul>

    <!-- Sun Times -->
    <h2>Sunrise & Sunset</h2>
    <ul>
      <li>Sunrise: <%= new Date(weatherData.sys.sunrise * 1000).toLocaleTimeString() %></li>
      <li>Sunset: <%= new Date(weatherData.sys.sunset * 1000).toLocaleTimeString() %></li>
    </ul>

    <p><a href="/">Return Home</a></p>

  </body>
</html>
